<!-- <!DOCTYPE html>
<head>
  <meta charset="utf-8">
  <script src="https://d3js.org/d3.v7.min.js"></script>
  <style>
    body { margin:0;position:fixed;top:0;right:0;bottom:0;left:0; }
    svg { width:100%; height: 100% }
  </style>
</head>

<body>
  <div id='hurtme'></div>

  <script>
    var width = 960;
    var height = 500;
    
    var svg = d3.select("#hurtme").append("svg")
    
    var projection = d3.geoMercator()
      .scale(width / 2 / Math.PI)
      //.scale(100)
      .translate([width / 2, height / 2])

    var path = d3.geoPath()
      .projection(projection);
    
    var url = "http://enjalot.github.io/wwsd/data/world/world-110m.geojson";
    d3.json(url, function(err, geojson) {
      svg.append("path")
        .attr("d", path(geojson))
    })
    
  </script>
</body> -->

<!-- <!DOCTYPE html>
<html lang="en-us">
<head>
    <link rel="stylesheet" type="text/css" href="https://mcaule.github.io/d3-timeseries/dist/d3_timeseries.min.css">
</head>
<body>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/4.10.0/d3.min.js"></script>
    <script src="https://mcaule.github.io/d3-timeseries/dist/d3_timeseries.min.js"></script>
    <script src="https://mcaule.github.io/d3-timeseries/dist/create-example-data.js"></script>
    <section class="main-content">
        <h3>
            Difference
        </h3>

            <div id="chart"></div>
            <script>
                var data = createRandomData(80,[0,1000],0.01)
                // [{date:new Date('2013-01-01'),n:120,n3:200,ci_up:127,ci_down:115},...]
                var chart = d3_timeseries()
                  .addSerie(data.slice(0,60),{x:'date',y:'n'},{interpolate:'linear',color:"#a6cee3",label:"value"})
                  .addSerie(data.slice(50),
                          {x:'date',y:'n3',ci_up:'ci_up',ci_down:'ci_down'},
                          {interpolate:'monotone',dashed:true,color:"#a6cee3",label:"prediction"})
                  .width(820)

                chart('#chart')
            </script>
    </section>
</body> -->

<!DOCTYPE html>
<html>

<head>
  <script src="https://d3js.org/d3.v7.min.js"></script>
  <script src="https://unpkg.com/topojson@3"></script>

</head>

<body>
  <p>
    Hello!
  </p>
</body>
<svg id="myMap" style="position: absolute;
left: 50%;
top: 50%;
transform: translate(-50%, -50%);"></svg>
<script>
  const width = 900;
  const height = 600;

  const svg = d3.select('#myMap').attr('width', width).attr('height', height);

  function zoomed(event) {
    const { transform } = event;
    g.attr("transform", transform);
    g.attr("stroke-width", 1 / transform.k);
  }

  const zoom = d3.zoom()
    .scaleExtent([1, 8])
    .on("zoom", zoomed);

  const projection = d3.geoMercator().scale(140)
    .translate([width / 2, height / 1.4]);
  const path = d3.geoPath(projection);

  const g = svg.append('g');

  svg.call(zoom);

  // create a tooltip
  var Tooltip = d3.select("#myMap")
    .append("div")
    .style("opacity", 0)
    .attr("class", "tooltip")
    .style("background-color", "white")
    .style("border", "solid")
    .style("border-width", "2px")
    .style("border-radius", "5px")
    .style("padding", "5px")

  // Three function that change the tooltip when user hover / move / leave a cell
  var mouseover = function (d) {
    Tooltip
      .style("opacity", 1)
    d3.select(this)
      .style("stroke", "black")
      .style("opacity", 1)
  }
  var mousemove = function (d) {
    Tooltip
      .html("The exact value of<br>this cell is: " + d.value)
      .style("left", (d3.mouse(this)[0] + 70) + "px")
      .style("top", (d3.mouse(this)[1]) + "px")
  }
  var mouseleave = function (d) {
    Tooltip
      .style("opacity", 0)
    d3.select(this)
      .style("stroke", "#999")
      .style("opacity", 0.8)
  }

  d3.json('https://cdn.jsdelivr.net/npm/world-atlas@2/countries-110m.json')
    .then(data => {

      const countries = topojson.feature(data, data.objects.countries);
      g.selectAll('path').data(countries.features).enter().append('path')
        .attr('class', 'country')
        .attr('d', path)
        .attr('style', `
  fill: #ccc;
  stroke: #999;
  opacity: 0.8;
`)
        .on("mouseover", mouseover)
        .on("mousemove", mousemove)
        .on("mouseleave", mouseleave)

    });



</script>

</html>